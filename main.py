import telebot
from telebot import types
import sqlite3
import json
from datetime import datetime

bot = telebot.TeleBot('8478330063:AAH-IQvDiAVqkXhpB1IWhksBg8486g9sZQo')

# –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
admin_states = {}
ADMIN_PASSWORD = "141107"
user_states = {}  # –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤ –±–æ—Ç–∞
BOT_TEXTS = {
    'welcome': '–ü—Ä–∏–≤–µ—Ç, {first_name}! üëã\n\n–Ø –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–æ–µ IT-–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–±–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ.\n\n–ü—Ä–æ–π–¥–∏ –Ω–µ–±–æ–ª—å—à–æ–π —Ç–µ—Å—Ç, –æ–Ω –¥–∞—ë—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–≤–æ–µ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –≤ IT.\n\n–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å.',
    'result': 'üéØ –ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —Ç–µ—Å—Ç–∞ –≤–∞–º –ø–æ–¥—Ö–æ–¥–∏—Ç: {direction_name}\n\nüìù –û–ø–∏—Å–∞–Ω–∏–µ:\n{direction_description}\n\nüí™ –í–∞—à–∏ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:\n{direction_strengths}\n\n–•–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã —Å —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π –ø–æ —ç—Ç–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏?',
    'daily_tasks_offer': '–ß—Ç–æ–±—ã —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä–µ–µ, –º–æ–≥—É –ø—Ä–∏—Å—ã–ª–∞—Ç—å —Ç–µ–±–µ –º–∞–ª–µ–Ω—å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.\n\n–•–æ—á–µ—à—å –ø–æ–ª—É—á–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ —Ç–≤–æ–µ–º—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é? üòä',
    'paid_course_offer': '–•–æ—á–µ—à—å –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å, –∫–æ—Ç–æ—Ä—ã–π –æ–±—É—á–∏—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ —Å –Ω—É–ª—è?'
}


# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
def init_db():
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()

    # –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS users (
            user_id INTEGER PRIMARY KEY,
            username TEXT,
            first_name TEXT,
            current_question INTEGER DEFAULT 0,
            answers TEXT DEFAULT '[]',
            direction TEXT,
            created_at DATETIME DEFAULT CURRENT_TIMESTAMP
        )
    ''')

    # –¢–∞–±–ª–∏—Ü–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ —Ç–µ—Å—Ç–∞ - –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –ó–ê–ü–†–û–°
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS test_questions (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            question_text TEXT NOT NULL,
            options TEXT NOT NULL, -- JSON –º–∞—Å—Å–∏–≤ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
            weights TEXT NOT NULL, -- JSON –≤–µ—Å–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞
            question_order INTEGER NOT NULL,
            image_id TEXT -- ID –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ Telegram
        )
    ''')

    # –¢–∞–±–ª–∏—Ü–∞ IT-–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS directions (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL,
            description TEXT,
            strengths TEXT,
            daily_task_template TEXT,
            free_course_url TEXT,
            paid_course_url TEXT
        )
    ''')

    # –¢–∞–±–ª–∏—Ü–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS interview_questions (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            direction_id INTEGER,
            question_text TEXT,
            FOREIGN KEY (direction_id) REFERENCES directions (id)
        )
    ''')

    # –¢–∞–±–ª–∏—Ü–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS daily_tasks (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            direction_id INTEGER,
            task_text TEXT,
            difficulty_level INTEGER,
            FOREIGN KEY (direction_id) REFERENCES directions (id)
        )
    ''')

    # –¢–∞–±–ª–∏—Ü–∞ —Ç–µ–∫—Å—Ç–æ–≤ –±–æ—Ç–∞
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS bot_texts (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            text_type TEXT UNIQUE NOT NULL,
            content TEXT NOT NULL
        )
    ''')

    # –ó–∞–ø–æ–ª–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ —Ç–∞–±–ª–∏—Ü—ã –ø—É—Å—Ç—ã–µ
    if not cursor.execute("SELECT COUNT(*) FROM directions").fetchone()[0]:
        # –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        directions = [
            {
                'name': '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
                'description': '–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã IT-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–º–ø–∞–Ω–∏–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–µ–π –∏ —Å–µ—Ä–≤–µ—Ä–æ–≤.',
                'strengths': '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ, —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º, –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –¥–µ—Ç–∞–ª—è–º',
                'daily_task_template': '–ù–∞—Å—Ç—Ä–æ–∏—Ç—å {task} –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ',
                'free_course_url': 'https://stepik.org/course/248874/promo?search=8344317038',
                'paid_course_url': 'https://skillbox.by/course/sysadmin/'
            },
            {
                'name': '–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫',
                'description': '–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, –ø–æ–∏—Å–∫ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫.',
                'strengths': '–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ, —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø–æ–¥—Ö–æ–¥',
                'daily_task_template': '–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å {task}',
                'free_course_url': 'https://stepik.org/course/120679/promo?search=8344451556',
                'paid_course_url': 'https://skillbox.by/course/profession-test/'
            },
            {
                'name': '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫',
                'description': '–ê–Ω–∞–ª–∏–∑ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π, —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞–Ω–∏–π.',
                'strengths': '–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è, —Ä–∞–±–æ—Ç–∞ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏',
                'daily_task_template': '–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å {task} –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏—è',
                'free_course_url': 'https://stepik.org/course/252286/promo?search=8344464390',
                'paid_course_url': 'https://skillbox.by/course/profession-business-analyst/'
            },
            {
                'name': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏',
                'description': '–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è IT-–ø—Ä–æ–µ–∫—Ç–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π.',
                'strengths': '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –Ω–∞–≤—ã–∫–∏, –ª–∏–¥–µ—Ä—Å—Ç–≤–æ, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è',
                'daily_task_template': '–°–æ—Å—Ç–∞–≤–∏—Ç—å –ø–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è {task}',
                'free_course_url': 'https://stepik.org/course/119619/promo?search=8344478305',
                'paid_course_url': 'https://skillbox.by/course/itproject/'
            },
            {
                'name': 'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫',
                'description': '–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.',
                'strengths': '–í–Ω–∏–º–∞–Ω–∏–µ –∫ –¥–µ—Ç–∞–ª—è–º, –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å, –∑–Ω–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π',
                'daily_task_template': '–°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è {task}',
                'free_course_url': 'https://www.udemy.com/course/html-css-from-zero/',
                'paid_course_url': 'https://skillbox.ru/course/frontend-developer/'
            },
            {
                'name': 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫',
                'description': '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö.',
                'strengths': '–õ–æ–≥–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ, –∞–ª–≥–æ—Ä–∏—Ç–º—ã, —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö',
                'daily_task_template': '–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å API –¥–ª—è {task}',
                'free_course_url': 'https://www.youtube.com/playlist?list=PLw6SJ6q6-1YptavAy65knVOSBZ_y6YxmV',
                'paid_course_url': 'https://skillbox.by/kursy-backend-razrabotka/'
            },
            {
                'name': 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä',
                'description': '–°–æ–∑–¥–∞–Ω–∏–µ —É–¥–æ–±–Ω—ã—Ö –∏ —ç—Å—Ç–µ—Ç–∏—á–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞.',
                'strengths': '–ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å, —ç–º–ø–∞—Ç–∏—è, –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º—É –æ–ø—ã—Ç—É',
                'daily_task_template': '–°–æ–∑–¥–∞—Ç—å –¥–∏–∑–∞–π–Ω {task} —Å —É—á–µ—Ç–æ–º UX –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤',
                'free_course_url': 'https://stepik.org/course/250391/promo?search=8344645028',
                'paid_course_url': 'https://skillbox.by/course/profession-ux/'
            },
            {
                'name': '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥',
                'description': '–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ —É—Å–ª—É–≥ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π.',
                'strengths': '–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ, –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å, –∑–Ω–∞–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤',
                'daily_task_template': '–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è –¥–ª—è {task}',
                'free_course_url': 'https://stepik.org/course/52116/promo?search=8344653262',
                'paid_course_url': 'https://skillbox.by/course/internet-marketolog/'
            }
        ]

        for direction in directions:
            cursor.execute(
                "INSERT INTO directions (name, description, strengths, daily_task_template, free_course_url, paid_course_url) VALUES (?, ?, ?, ?, ?, ?)",
                (direction['name'], direction['description'], direction['strengths'], direction['daily_task_template'],
                 direction['free_course_url'], direction['paid_course_url'])
            )

    if not cursor.execute("SELECT COUNT(*) FROM test_questions").fetchone()[0]:
        # –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–ø—Ä–æ—Å—ã —Ç–µ—Å—Ç–∞ —Å —Ç—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–¥—É–º–∞–Ω–Ω—ã–º–∏ –≤–µ—Å–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞
        questions = [
            {  # 1 - –ü—Ä–æ–µ–∫—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥
                'text': '1.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 1},  # –º–µ–Ω–µ–¥–∂–µ—Ä—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –∏ —Ç–æ—á–Ω–æ—Å—Ç—å
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 2},  # –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Ä—ã–Ω–æ–∫ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 2}  # –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å
                ]
            },
            {  # 2 - –í–æ—Å–ø—Ä–∏—è—Ç–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
                'text': '2. –ö–∞–∫ –≤—ã –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ª—É—á—à–µ –≤—Å–µ–≥–æ?',
                'options': [
                    '–≤ –≤–∏–¥–µ –±–ª–æ–∫-—Å—Ö–µ–º –∏ –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤',
                    '–≤ –≤–∏–¥–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤, –¥–∏–∞–≥—Ä–∞–º–º –∏ —Ç–∞–±–ª–∏—Ü',
                    '–≤ –≤–∏–¥–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞',
                    '–≤ –≤–∏–¥–µ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤ –∏ –∏–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∏',
                    '–Ω–∞ —Å–ª—É—Ö, —á–µ—Ä–µ–∑ —É—Å—Ç–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ'
                ],
                'weights': [
                    {'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 3, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, '–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 2},  # –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –¥–∞–Ω–Ω—ã–µ
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, 'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2}  # –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏
                ]
            },
            {  # 3 - –ë–∏–∑–Ω–µ—Å-–ø–æ–º–æ—â—å (–∫–∞—Ñ–µ)
                'text': '3.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 2},  # –∞–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å —Å—Ä–æ–∫–æ–≤
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 1},  # –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
                    {'–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 2}  # –¥–∏–∑–∞–π–Ω –∏ –±—Ä–µ–Ω–¥–∏–Ω–≥
                ]
            },
            {  # 4 - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                'text': '4.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 1},  # –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, 'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
                    {'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2}  # –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ª–æ–≥–∏–∫–∞
                ]
            },
            {  # 5 - –¢–∏–ø—ã –∑–∞–¥–∞—á
                'text': '5.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –¥–µ—Ç–∞–ª—è–º
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –∫–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞
                    {'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 3, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∑–∞–¥–∞—á
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 2}  # –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ —Ç—Ä–µ–Ω–¥—ã
                ]
            },
            {  # 6 - –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
                'text': '6.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, 'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —ç—Å—Ç–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 2},  # –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Ç–æ—á–Ω–æ—Å—Ç—å
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2}  # –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏
                ]
            },
            {  # 7 - –£—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã
                'text': '7.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # –≥–∏–±–∫–∏–π –≥—Ä–∞—Ñ–∏–∫
                    {'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 3, '–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 2},  # –∫–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # —Ä—É–∫–æ–≤–æ–¥—è—â–∞—è —Ä–æ–ª—å
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 2}  # —Ç–≤–æ—Ä—á–µ—Å–∫–∞—è —Å–≤–æ–±–æ–¥–∞
                ]
            },
            {  # 8 - –†–æ–ª—å –≤ —Ä–∞–±–æ—á–µ–π –≥—Ä—É–ø–ø–µ
                'text': '8.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 1},  # –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # –∞–Ω–∞–ª–∏–∑ –∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 1},  # –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—ã–Ω–∫–∞
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 2}  # –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞
                ]
            },
            {  # 9 - –•–æ–±–±–∏
                'text': '9.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, 'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 2},  # –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 2},  # –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
                    {'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 3, '–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 2}  # –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ
                ]
            },
            {  # 10 - –ü–æ–º–æ—â—å —Å –≤—ã–ø—É—Å–∫–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º
                'text': '10.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, '–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 2},  # –∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞
                    {'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, 'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 2}  # —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –≤—ã–≤–æ–¥–æ–≤
                ]
            },
            {  # 11 - –í—ã–±–æ—Ä –≥–∞–¥–∂–µ—Ç–∞ –¥–ª—è —Ñ–∏—Ç–Ω–µ—Å–∞
                'text': '11.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 1},  # –≤—ã—è–≤–ª–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—ã–Ω–∫–∞
                    {'–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –æ—Ü–µ–Ω–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, 'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2}  # —ç—Å—Ç–µ—Ç–∏–∫–∞ –∏ —É–¥–æ–±—Å—Ç–≤–æ
                ]
            },
            {  # 12 - –í—ã—Å—Ç–∞–≤–∫–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
                'text': '12.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # —Ç–æ—á–Ω–æ—Å—Ç—å –∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 1},  # —Ç—Ä–µ–Ω–¥—ã –∑–¥–æ—Ä–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ –∂–∏–∑–Ω–∏
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π
                    {'–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —É–º–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
                    {'–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2}  # –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
                ]
            },
            {  # 13 - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã
                'text': '13.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã –∏ –ø—Ä–∞–≤–∏–ª–∞
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 2},  # –∞–Ω–∞–ª–∏–∑ –∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 2},  # —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç
                    {'–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2}  # –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
                ]
            },
            {  # 14 - –í—Å—Ç—Ä–µ—á–∞ –≤—ã–ø—É—Å–∫–Ω–∏–∫–æ–≤
                'text': '14.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 1},  # –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, 'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # –¥–∏–∑–∞–π–Ω –∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2}  # –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ—Ç–∞–ª–µ–π
                ]
            },
            {  # 15 - –í—ã–±–æ—Ä –∫–Ω–∏–≥–∏
                'text': '15.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –±–∏–∑–Ω–µ—Å –∏ —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, 'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ –∏ –≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 2},  # –∞–Ω–∞–ª–∏–∑ –æ–ø—ã—Ç–∞ –¥—Ä—É–≥–∏—Ö
                    {'–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # –ø—Ä–∏–∫–ª–∞–¥–Ω—ã–µ –∑–Ω–∞–Ω–∏—è
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2}  # –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏
                ]
            },
            {  # 16 - –†–µ–º–æ–Ω—Ç –≤ –¥–æ–º–µ
                'text': '16.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
                    {'–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 1},  # —Å–±–æ—Ä —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 2},  # –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 2}  # –¥–∏–∑–∞–π–Ω –∏ —Ç—Ä–µ–Ω–¥—ã
                ]
            },
            {  # 17 - –î–æ–º–∞—à–Ω–∏–π —Ä–æ–±–æ—Ç-–ø–æ–º–æ—â–Ω–∏–∫
                'text': '17.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
                    {'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 3, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, 'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # –¥–∏–∑–∞–π–Ω –∏ —ç—Å—Ç–µ—Ç–∏–∫–∞
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2}  # —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ —Ä—ã–Ω–æ—á–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
                ]
            },
            {  # 18 - –õ—é–±–∏–º—ã–µ —à–∫–æ–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
                'text': '18. –í–∞—à–∏ –ª—é–±–∏–º—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã –≤ —à–∫–æ–ª–µ',
                'options': [
                    '–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞, —Ñ–∏–∑–∏–∫–∞',
                    '—Ä–∏—Å–æ–≤–∞–Ω–∏–µ, –∏—Å–∫—É—Å—Å—Ç–≤–æ, —á–µ—Ä—á–µ–Ω–∏–µ',
                    '–≥–µ–æ–≥—Ä–∞—Ñ–∏—è, –∏—Å—Ç–æ—Ä–∏—è, –æ–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ',
                    '–∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫, –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏',
                    '—Ä—É—Å—Å–∫–∏–π/–±–µ–ª–æ—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –∏ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞'
                ],
                'weights': [
                    {'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 3, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # —Ç–æ—á–Ω—ã–µ –Ω–∞—É–∫–∏
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, 'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 2},  # –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã–µ –Ω–∞—É–∫–∏
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 2},  # —è–∑—ã–∫–∏ –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 2}  # —è–∑—ã–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
                ]
            },
            {  # 19 - –ü–æ–µ–∑–¥–∫–∞ –Ω–∞ –ø–æ–µ–∑–¥–µ
                'text': '19.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, '–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 2},  # –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ —á—Ç–µ–Ω–∏–µ
                    {'–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 2},  # –æ—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 2}  # —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç
                ]
            },
            {  # 20 - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –æ—Ç–ø—É—Å–∫—É
                'text': '20.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 1},  # —Å–±–æ—Ä –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã
                    {'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 2}  # –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ—Ç–∞–ª–µ–π
                ]
            },
            {  # 21 - –°–≤–æ–±–æ–¥–Ω—ã–π –≤—ã—Ö–æ–¥–Ω–æ–π
                'text': '21.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 3, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
                    {'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 3, '–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 2},  # –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∏–≥—Ä—ã
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 2},  # –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
                    {'–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2}  # —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
                ]
            },
            {  # 22 - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø–æ—Ö–æ–¥—É
                'text': '22.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 1},  # —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥–æ–π
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 3, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 1},  # —É—á–µ—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π
                    {'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 3, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 2},  # –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ—Ç–∞–ª–µ–π
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 2}  # —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è –∏ –∫–æ–Ω—Ç–µ–Ω—Ç
                ]
            },
            {  # 23 - –ö–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∞ –≤ –Ω–æ–≤–æ–º –≥–æ—Ä–æ–¥–µ
                'text': '23.',
                'options': [
                    '1Ô∏è‚É£',
                    '2Ô∏è‚É£',
                    '3Ô∏è‚É£',
                    '4Ô∏è‚É£',
                    '5Ô∏è‚É£'
                ],
                'weights': [
                    {'–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 3, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
                    {'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 3, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 2},  # –º–µ—Å—Ç–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –¥–æ—Å—É–≥–∞
                    {'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 3, 'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2}  # –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¥–∏–∑–∞–π–Ω
                ]
            },
            {  # 24 - –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã
                'text': '24. –í–∞—à —Å—É–º–º–∞—Ä–Ω—ã–π –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã',
                'options': [
                    '–±–µ–∑ –æ–ø—ã—Ç–∞',
                    '–¥–æ 1 –≥–æ–¥–∞',
                    '–æ—Ç 1 –≥–æ–¥–∞ –¥–æ 3-—Ö –ª–µ—Ç',
                    '–æ—Ç 3-—Ö –¥–æ 5 –ª–µ—Ç',
                    '—Å–≤—ã—à–µ 5 –ª–µ—Ç'
                ],
                'weights': [
                    {'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 2},  # –º–ª–∞–¥—à–∏–µ –ø–æ–∑–∏—Ü–∏–∏
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 2, 'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # –Ω–∞—á–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
                    {'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # —Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 2, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # –æ–ø—ã—Ç–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2}  # —Å—Ç–∞—Ä—à–∏–µ –ø–æ–∑–∏—Ü–∏–∏
                ]
            },
            {  # 25 - –£–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∏–π –æ–ø—ã—Ç
                'text': '25. –£ –≤–∞—Å –µ—Å—Ç—å –æ–ø—ã—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è?',
                'options': [
                    '–±–µ–∑ —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞',
                    '–¥–æ 1 –≥–æ–¥–∞',
                    '–æ—Ç 1 –≥–æ–¥–∞ –¥–æ 3-—Ö –ª–µ—Ç',
                    '–æ—Ç 3-—Ö –¥–æ 5 –ª–µ—Ç',
                    '—Å–≤—ã—à–µ 5 –ª–µ—Ç'
                ],
                'weights': [
                    {'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2, 'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 2},  # –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏
                    {'–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 2, 'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 2},  # –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∏–π –æ–ø—ã—Ç
                    {'–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2, '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 2},  # –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –æ–ø—ã—Ç —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 2},  # –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π –æ–ø—ã—Ç
                    {'–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 3, '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 2}  # –æ–ø—ã—Ç–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å
                ]
            }
        ]

        for i, question in enumerate(questions):
            cursor.execute(
                "INSERT INTO test_questions (question_text, options, weights, question_order) VALUES (?, ?, ?, ?)",
                (question['text'], json.dumps(question['options']), json.dumps(question['weights']), i)
            )

    if not cursor.execute("SELECT COUNT(*) FROM interview_questions").fetchone()[0]:
        # –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π
        interview_questions = [
            (1, '–ß—Ç–æ —Ç–∞–∫–æ–µ DNS –∏ –¥–ª—è —á–µ–≥–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?'),
            (1, '–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ Linux?'),
            (1, '–ß—Ç–æ —Ç–∞–∫–æ–µ RAID –∏ –∫–∞–∫–∏–µ —É—Ä–æ–≤–Ω–∏ –≤—ã –∑–Ω–∞–µ—Ç–µ?'),
            (2, '–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–µ—Å—Ç-–∫–µ–π—Å –∏ –∫–∞–∫ –µ–≥–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å?'),
            (2, '–ö–∞–∫–∏–µ –≤–∏–¥—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã –∑–Ω–∞–µ—Ç–µ?'),
            (2, '–ö–∞–∫ –≤—ã –ø—Ä–æ–≤–æ–¥–∏—Ç–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?'),
            (3, '–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å—Ç–æ—Ä–∏–∏?'),
            (3, '–ö–∞–∫ –≤—ã –ø—Ä–æ–≤–æ–¥–∏—Ç–µ —Å–±–æ—Ä —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π?'),
            (3, '–ö–∞–∫–∏–µ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤—ã –∑–Ω–∞–µ—Ç–µ?'),
            (4, '–ß—Ç–æ —Ç–∞–∫–æ–µ Agile –∏ Scrum?'),
            (4, '–ö–∞–∫ –≤—ã —É–ø—Ä–∞–≤–ª—è–µ—Ç–µ —Ä–∏—Å–∫–∞–º–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ?'),
            (4, '–ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ?'),
            (5, '–ß—Ç–æ —Ç–∞–∫–æ–µ React –∏ –∫–∞–∫–æ–≤—ã –µ–≥–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞?'),
            (5, '–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Virtual DOM?'),
            (5, '–ö–∞–∫–∏–µ CSS-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –≤—ã –∑–Ω–∞–µ—Ç–µ?'),
            (6, '–ß—Ç–æ —Ç–∞–∫–æ–µ REST API?'),
            (6, '–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è?'),
            (6, '–ö–∞–∫–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤—ã –∑–Ω–∞–µ—Ç–µ –∏ —Å –∫–∞–∫–∏–º–∏ —Ä–∞–±–æ—Ç–∞–ª–∏?'),
            (7, '–ß—Ç–æ —Ç–∞–∫–æ–µ UI –∏ UX –¥–∏–∑–∞–π–Ω?'),
            (7, '–ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ?'),
            (7, '–ö–∞–∫ –≤—ã –ø—Ä–æ–≤–æ–¥–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è?'),
            (8, '–ß—Ç–æ —Ç–∞–∫–æ–µ SEO –∏ –∫–∞–∫ –µ–≥–æ —É–ª—É—á—à–∏—Ç—å?'),
            (8, '–ö–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –≤—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç–µ –≤ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∫–∞–º–ø–∞–Ω–∏—è—Ö?'),
            (8, '–ö–∞–∫ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ç—è–º–∏ –¥–ª—è –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è?')
        ]

        for direction_id, question in interview_questions:
            cursor.execute(
                "INSERT INTO interview_questions (direction_id, question_text) VALUES (?, ?)",
                (direction_id, question)
            )

    if not cursor.execute("SELECT COUNT(*) FROM daily_tasks").fetchone()[0]:
        # –î–æ–±–∞–≤–ª—è–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
        daily_tasks = [
            (1, '—Å–µ—Ç–µ–≤–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏', 1),
            (1, '—Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è', 1),
            (1, '–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã', 2),
            (2, '—Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 1),
            (2, '—Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –ø–æ —Å–∞–π—Ç—É', 2),
            (2, '–∫–æ—Ä–∑–∏–Ω—ã –ø–æ–∫—É–ø–æ–∫', 2),
            (3, '–±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–∫–∞–∑–∞', 1),
            (3, '—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏', 2),
            (3, '–æ—Ç—á–µ—Ç–æ–≤ –¥–ª—è —Å—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä–æ–≤', 1),
            (4, '—Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞', 1),
            (4, '—Ä–∏—Å–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞', 2),
            (4, '–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–ª–∞–Ω–∞', 1),
            (5, '–∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π –≤–µ—Ä—Å—Ç–∫–∏', 1),
            (5, '–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞', 2),
            (5, '–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏', 2),
            (6, 'API —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞', 1),
            (6, '–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö', 2),
            (6, '—Å–∏—Å—Ç–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏', 2),
            (7, '–º–æ–±–∏–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞', 1),
            (7, '–¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã', 2),
            (7, '–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø–æ—Ç–æ–∫–∞', 1),
            (8, '–∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω–∞', 1),
            (8, '—Ä–µ–∫–ª–∞–º–Ω–æ–π –∫–∞–º–ø–∞–Ω–∏–∏', 2),
            (8, '–∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤–µ–±-—Å–∞–π—Ç–∞', 2)
        ]

        for direction_id, task, difficulty in daily_tasks:
            cursor.execute(
                "INSERT INTO daily_tasks (direction_id, task_text, difficulty_level) VALUES (?, ?, ?)",
                (direction_id, task, difficulty)
            )

    # –ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–∞–±–ª–∏—Ü—É bot_texts –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    if not cursor.execute("SELECT COUNT(*) FROM bot_texts").fetchone()[0]:
        initial_texts = [
            ('welcome', BOT_TEXTS['welcome']),
            ('result', BOT_TEXTS['result']),
            ('daily_tasks_offer', BOT_TEXTS['daily_tasks_offer']),
            ('paid_course_offer', BOT_TEXTS['paid_course_offer']),
            ('button_start_test', '–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç')
        ]

        for text_type, content in initial_texts:
            cursor.execute(
                "INSERT OR REPLACE INTO bot_texts (text_type, content) VALUES (?, ?)",
                (text_type, content)
            )

    conn.commit()
    conn.close()

def get_all_directions():
    """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM directions")
    directions = cursor.fetchall()
    conn.close()

    result = []
    for direction in directions:
        result.append({
            'id': direction[0],
            'name': direction[1],
            'description': direction[2],
            'strengths': direction[3],
            'daily_task_template': direction[4],
            'free_course_url': direction[5],
            'paid_course_url': direction[6]
        })
    return result

def check_and_fix_db_structure():
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()

    try:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å—Ç–æ–ª–±—Ü–∞ image_id –≤ test_questions
        cursor.execute("PRAGMA table_info(test_questions)")
        columns = [column[1] for column in cursor.fetchall()]

        if 'image_id' not in columns:
            print("–î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–æ–ª–±–µ—Ü image_id –≤ test_questions...")
            cursor.execute("ALTER TABLE test_questions ADD COLUMN image_id TEXT")
            conn.commit()
            print("–°—Ç–æ–ª–±–µ—Ü image_id —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω")
        else:
            print("–°—Ç–æ–ª–±–µ—Ü image_id —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")

    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î: {e}")
    finally:
        conn.close()


# –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–∫—Å—Ç–∞–º–∏ –±–æ—Ç–∞
def get_bot_text(text_type):
    """–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç –±–æ—Ç–∞ –ø–æ —Ç–∏–ø—É"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute("SELECT content FROM bot_texts WHERE text_type = ?", (text_type,))
    result = cursor.fetchone()
    conn.close()

    if result:
        return result[0]
    else:
        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—Å—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ
        return BOT_TEXTS.get(text_type, '')


def update_bot_text(text_type, new_content):
    """–û–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç –±–æ—Ç–∞"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute(
        "INSERT OR REPLACE INTO bot_texts (text_type, content) VALUES (?, ?)",
        (text_type, new_content)
    )
    conn.commit()
    conn.close()


def get_all_bot_texts():
    """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–µ–∫—Å—Ç—ã –±–æ—Ç–∞"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute("SELECT text_type, content FROM bot_texts")
    texts = cursor.fetchall()
    conn.close()

    result = {}
    for text_type, content in texts:
        result[text_type] = content
    return result


# –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

def show_courses_management_menu(chat_id):
    """–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—É—á–∞—é—â–∏–º–∏ –∫—É—Ä—Å–∞–º–∏"""
    markup = types.InlineKeyboardMarkup()
    btn_edit_free = types.InlineKeyboardButton('‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å', callback_data='admin_edit_free_course')
    btn_edit_paid = types.InlineKeyboardButton('üíº –ò–∑–º–µ–Ω–∏—Ç—å –ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å', callback_data='admin_edit_paid_course')
    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_main')

    markup.add(btn_edit_free)
    markup.add(btn_edit_paid)
    markup.add(btn_back)

    bot.send_message(chat_id, "üéì –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—É—á–∞—é—â–∏–º–∏ –∫—É—Ä—Å–∞–º–∏:", reply_markup=markup)


# –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫—É—Ä—Å–æ–≤
def show_directions_for_course_editing(chat_id, course_type):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫—É—Ä—Å–æ–≤"""
    directions = get_all_directions()

    if not directions:
        bot.send_message(chat_id, "‚ùå –í –±–∞–∑–µ –Ω–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π.")
        return

    markup = types.InlineKeyboardMarkup()
    for direction in directions:
        if course_type == 'free':
            callback_data = f'admin_edit_free_{direction["id"]}'
            button_text = f"‚úèÔ∏è {direction['name']}"
        else:  # paid
            callback_data = f'admin_edit_paid_{direction["id"]}'
            button_text = f"üíº {direction['name']}"

        btn = types.InlineKeyboardButton(button_text, callback_data=callback_data)
        markup.add(btn)

    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_back_to_courses_menu')
    markup.add(btn_back)

    if course_type == 'free':
        bot.send_message(chat_id, "‚úèÔ∏è –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –∫—É—Ä—Å–∞:", reply_markup=markup)
    else:
        bot.send_message(chat_id, "üíº –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–ª–∞—Ç–Ω–æ–≥–æ –∫—É—Ä—Å–∞:", reply_markup=markup)


# –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
def update_free_course_url(direction_id, new_url):
    """–û–±–Ω–æ–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute(
        "UPDATE directions SET free_course_url = ? WHERE id = ?",
        (new_url, direction_id)
    )
    conn.commit()
    conn.close()


def update_paid_course_url(direction_id, new_url):
    """–û–±–Ω–æ–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute(
        "UPDATE directions SET paid_course_url = ? WHERE id = ?",
        (new_url, direction_id)
    )
    conn.commit()
    conn.close()


# –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤
def handle_edit_free_course(message, state):
    chat_id = message.chat.id
    direction_id = state['direction_id']

    new_url = message.text
    update_free_course_url(direction_id, new_url)

    # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    if chat_id in admin_states:
        del admin_states[chat_id]

    bot.send_message(chat_id, "‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!")
    show_courses_management_menu(chat_id)


def handle_edit_paid_course(message, state):
    chat_id = message.chat.id
    direction_id = state['direction_id']

    new_url = message.text
    update_paid_course_url(direction_id, new_url)

    # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    if chat_id in admin_states:
        del admin_states[chat_id]

    bot.send_message(chat_id, "‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!")
    show_courses_management_menu(chat_id)


def get_all_daily_tasks_with_direction():
    """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute('''
        SELECT dt.id, dt.task_text, dt.difficulty_level, d.name, d.id 
        FROM daily_tasks dt 
        JOIN directions d ON dt.direction_id = d.id
        ORDER BY d.name, dt.difficulty_level, dt.id
    ''')
    tasks = cursor.fetchall()
    conn.close()

    result = []
    for task in tasks:
        result.append({
            'id': task[0],
            'text': task[1],
            'difficulty': task[2],
            'direction_name': task[3],
            'direction_id': task[4]
        })
    return result


def get_daily_task_by_id(task_id):
    """–ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ –ø–æ ID"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute('''
        SELECT dt.id, dt.task_text, dt.difficulty_level, d.name, d.id 
        FROM daily_tasks dt 
        JOIN directions d ON dt.direction_id = d.id
        WHERE dt.id = ?
    ''', (task_id,))
    task = cursor.fetchone()
    conn.close()

    if task:
        return {
            'id': task[0],
            'text': task[1],
            'difficulty': task[2],
            'direction_name': task[3],
            'direction_id': task[4]
        }
    return None


def add_daily_task(direction_id, task_text, difficulty_level):
    """–î–æ–±–∞–≤–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute(
        "INSERT INTO daily_tasks (direction_id, task_text, difficulty_level) VALUES (?, ?, ?)",
        (direction_id, task_text, difficulty_level)
    )
    conn.commit()
    conn.close()


def update_daily_task(task_id, task_text, difficulty_level):
    """–û–±–Ω–æ–≤–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute(
        "UPDATE daily_tasks SET task_text = ?, difficulty_level = ? WHERE id = ?",
        (task_text, difficulty_level, task_id)
    )
    conn.commit()
    conn.close()


def delete_daily_task(task_id):
    """–£–¥–∞–ª–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute("DELETE FROM daily_tasks WHERE id = ?", (task_id,))
    conn.commit()
    conn.close()


# –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏
def show_tasks_management_menu(chat_id):
    """–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏"""
    markup = types.InlineKeyboardMarkup()
    btn_add = types.InlineKeyboardButton('‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ', callback_data='admin_add_task')
    btn_edit = types.InlineKeyboardButton('‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ', callback_data='admin_edit_task')
    btn_delete = types.InlineKeyboardButton('üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ', callback_data='admin_delete_task')
    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_main')

    markup.add(btn_add)
    markup.add(btn_edit)
    markup.add(btn_delete)
    markup.add(btn_back)

    bot.send_message(chat_id, "üìù –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏:", reply_markup=markup)


# –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
def show_directions_for_task(chat_id, action_type):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π"""
    directions = get_all_directions()

    if not directions:
        bot.send_message(chat_id, "‚ùå –í –±–∞–∑–µ –Ω–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π.")
        return

    markup = types.InlineKeyboardMarkup()
    for direction in directions:
        if action_type == 'add':
            callback_data = f'admin_add_task_{direction["id"]}'
            button_text = f"‚ûï {direction['name']}"
        elif action_type == 'edit':
            callback_data = f'admin_edit_task_{direction["id"]}'
            button_text = f"‚úèÔ∏è {direction['name']}"
        else:  # delete
            callback_data = f'admin_delete_task_{direction["id"]}'
            button_text = f"üóëÔ∏è {direction['name']}"

        btn = types.InlineKeyboardButton(button_text, callback_data=callback_data)
        markup.add(btn)

    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_back_to_tasks_menu')
    markup.add(btn_back)

    if action_type == 'add':
        bot.send_message(chat_id, "üìù –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è:", reply_markup=markup)
    elif action_type == 'edit':
        bot.send_message(chat_id, "‚úèÔ∏è –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π:", reply_markup=markup)
    else:
        bot.send_message(chat_id, "üóëÔ∏è –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π:", reply_markup=markup)


# –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –∑–∞–¥–∞–Ω–∏–π –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
def show_tasks_for_editing(chat_id, direction_id):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"""
    tasks = get_all_daily_tasks_with_direction()
    direction_tasks = [task for task in tasks if task['direction_id'] == direction_id]

    if not direction_tasks:
        bot.send_message(chat_id, "‚ùå –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ—Ç –∑–∞–¥–∞–Ω–∏–π.")
        return

    markup = types.InlineKeyboardMarkup()
    for task in direction_tasks:
        btn = types.InlineKeyboardButton(
            f"‚úèÔ∏è –£—Ä.{task['difficulty']}: {task['text'][:30]}...",
            callback_data=f'admin_edit_task_item_{task["id"]}'
        )
        markup.add(btn)

    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_back_to_tasks_menu')
    markup.add(btn_back)

    bot.send_message(chat_id, "üìã –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:", reply_markup=markup)


# –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –∑–∞–¥–∞–Ω–∏–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
def show_tasks_for_deletion(chat_id, direction_id):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è"""
    tasks = get_all_daily_tasks_with_direction()
    direction_tasks = [task for task in tasks if task['direction_id'] == direction_id]

    if not direction_tasks:
        bot.send_message(chat_id, "‚ùå –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ—Ç –∑–∞–¥–∞–Ω–∏–π.")
        return

    markup = types.InlineKeyboardMarkup()
    for task in direction_tasks:
        btn = types.InlineKeyboardButton(
            f"üóëÔ∏è –£—Ä.{task['difficulty']}: {task['text'][:30]}...",
            callback_data=f'admin_delete_task_item_{task["id"]}'
        )
        markup.add(btn)

    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_back_to_tasks_menu')
    markup.add(btn_back)

    bot.send_message(chat_id, "üóëÔ∏è –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è:", reply_markup=markup)


# –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å –∑–∞–¥–∞–Ω–∏—è–º–∏
def handle_add_daily_task(message, state):
    chat_id = message.chat.id
    direction_id = state['direction_id']

    task_text = message.text

    # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
    admin_states[chat_id]['task_text'] = task_text
    admin_states[chat_id]['step'] = 'difficulty'

    markup = types.InlineKeyboardMarkup()
    btn1 = types.InlineKeyboardButton('1 - –õ–µ–≥–∫–∏–π', callback_data='admin_difficulty_1')
    btn2 = types.InlineKeyboardButton('2 - –°—Ä–µ–¥–Ω–∏–π', callback_data='admin_difficulty_2')
    btn3 = types.InlineKeyboardButton('3 - –°–ª–æ–∂–Ω—ã–π', callback_data='admin_difficulty_3')
    markup.add(btn1, btn2, btn3)

    bot.send_message(chat_id, "üéØ –í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞–Ω–∏—è:", reply_markup=markup)


def handle_edit_daily_task(message, state):
    chat_id = message.chat.id
    task_id = state['task_id']

    new_text = message.text

    # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
    admin_states[chat_id]['new_text'] = new_text
    admin_states[chat_id]['step'] = 'edit_difficulty'

    markup = types.InlineKeyboardMarkup()
    btn1 = types.InlineKeyboardButton('1 - –õ–µ–≥–∫–∏–π', callback_data='admin_edit_difficulty_1')
    btn2 = types.InlineKeyboardButton('2 - –°—Ä–µ–¥–Ω–∏–π', callback_data='admin_edit_difficulty_2')
    btn3 = types.InlineKeyboardButton('3 - –°–ª–æ–∂–Ω—ã–π', callback_data='admin_edit_difficulty_3')
    markup.add(btn1, btn2, btn3)

    bot.send_message(chat_id, "üéØ –í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞–Ω–∏—è:", reply_markup=markup)


def get_all_interview_questions_with_direction():
    """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute('''
        SELECT iq.id, iq.question_text, d.name, d.id 
        FROM interview_questions iq 
        JOIN directions d ON iq.direction_id = d.id
        ORDER BY d.name, iq.id
    ''')
    questions = cursor.fetchall()
    conn.close()

    result = []
    for question in questions:
        result.append({
            'id': question[0],
            'text': question[1],
            'direction_name': question[2],
            'direction_id': question[3]
        })
    return result


def update_direction_description(direction_id, new_description):
    """–û–±–Ω–æ–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute(
        "UPDATE directions SET description = ? WHERE id = ?",
        (new_description, direction_id)
    )
    conn.commit()
    conn.close()


def update_direction_strengths(direction_id, new_strengths):
    """–û–±–Ω–æ–≤–∏—Ç—å —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute(
        "UPDATE directions SET strengths = ? WHERE id = ?",
        (new_strengths, direction_id)
    )
    conn.commit()
    conn.close()


def add_interview_question(direction_id, question_text):
    """–î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute(
        "INSERT INTO interview_questions (direction_id, question_text) VALUES (?, ?)",
        (direction_id, question_text)
    )
    conn.commit()
    conn.close()


def update_interview_question(question_id, new_text):
    """–û–±–Ω–æ–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute(
        "UPDATE interview_questions SET question_text = ? WHERE id = ?",
        (new_text, question_id)
    )
    conn.commit()
    conn.close()


def delete_interview_question(question_id):
    """–£–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute("DELETE FROM interview_questions WHERE id = ?", (question_id,))
    conn.commit()
    conn.close()


# –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
def show_recommendations_management_menu(chat_id):
    """–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏"""
    markup = types.InlineKeyboardMarkup()
    btn_edit_desc = types.InlineKeyboardButton('‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏',
                                               callback_data='admin_edit_direction_text')
    btn_edit_strengths = types.InlineKeyboardButton('üí™ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã',
                                                    callback_data='admin_edit_direction_strengths')
    btn_add_interview = types.InlineKeyboardButton('‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å —Å —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è',
                                                   callback_data='admin_add_interview_question')
    btn_edit_interview = types.InlineKeyboardButton('üìù –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å —Å —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è',
                                                    callback_data='admin_edit_interview_question')
    btn_delete_interview = types.InlineKeyboardButton('üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å —Å —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è',
                                                      callback_data='admin_delete_interview_question')
    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_main')

    markup.add(btn_edit_desc)
    markup.add(btn_edit_strengths)
    markup.add(btn_add_interview)
    markup.add(btn_edit_interview)
    markup.add(btn_delete_interview)
    markup.add(btn_back)

    bot.send_message(chat_id, "üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏:", reply_markup=markup)


# –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
def show_directions_for_editing(chat_id, edit_type):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"""
    directions = get_all_directions()

    if not directions:
        bot.send_message(chat_id, "‚ùå –í –±–∞–∑–µ –Ω–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π.")
        return

    markup = types.InlineKeyboardMarkup()
    for direction in directions:
        if edit_type == 'description':
            callback_data = f'admin_edit_desc_{direction["id"]}'
            button_text = f"üìù {direction['name']}"
        else:  # strengths
            callback_data = f'admin_edit_strengths_{direction["id"]}'
            button_text = f"üí™ {direction['name']}"

        btn = types.InlineKeyboardButton(button_text, callback_data=callback_data)
        markup.add(btn)

    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_back_to_recommendations_menu')
    markup.add(btn_back)

    if edit_type == 'description':
        bot.send_message(chat_id, "üìù –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø–∏—Å–∞–Ω–∏—è:", reply_markup=markup)
    else:
        bot.send_message(chat_id, "üí™ –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–ª—å–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω:", reply_markup=markup)


# –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è
def show_directions_for_interview_question(chat_id, action_type):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è"""
    directions = get_all_directions()

    if not directions:
        bot.send_message(chat_id, "‚ùå –í –±–∞–∑–µ –Ω–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π.")
        return

    markup = types.InlineKeyboardMarkup()
    for direction in directions:
        callback_data = f'admin_add_interview_{direction["id"]}'
        button_text = f"‚ûï {direction['name']}"

        btn = types.InlineKeyboardButton(button_text, callback_data=callback_data)
        markup.add(btn)

    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_back_to_recommendations_menu')
    markup.add(btn_back)

    bot.send_message(chat_id, "üìã –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞:", reply_markup=markup)


# –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
def show_interview_questions_for_editing(chat_id):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"""
    questions = get_all_interview_questions_with_direction()

    if not questions:
        bot.send_message(chat_id, "‚ùå –í –±–∞–∑–µ –Ω–µ—Ç –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è.")
        return

    markup = types.InlineKeyboardMarkup()
    for question in questions:
        btn = types.InlineKeyboardButton(
            f"üìù {question['direction_name']}: {question['text'][:30]}...",
            callback_data=f'admin_edit_interview_{question["id"]}'
        )
        markup.add(btn)

    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_back_to_recommendations_menu')
    markup.add(btn_back)

    bot.send_message(chat_id, "üìã –í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:", reply_markup=markup)


# –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
def show_interview_questions_for_deletion(chat_id):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è"""
    questions = get_all_interview_questions_with_direction()

    if not questions:
        bot.send_message(chat_id, "‚ùå –í –±–∞–∑–µ –Ω–µ—Ç –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è.")
        return

    markup = types.InlineKeyboardMarkup()
    for question in questions:
        btn = types.InlineKeyboardButton(
            f"üóëÔ∏è {question['direction_name']}: {question['text'][:30]}...",
            callback_data=f'admin_delete_interview_{question["id"]}'
        )
        markup.add(btn)

    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_back_to_recommendations_menu')
    markup.add(btn_back)

    bot.send_message(chat_id, "üóëÔ∏è –í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è:", reply_markup=markup)


def handle_edit_direction_description(message, state):
    chat_id = message.chat.id
    direction_id = state['direction_id']

    new_description = message.text
    update_direction_description(direction_id, new_description)

    # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    if chat_id in admin_states:
        del admin_states[chat_id]

    bot.send_message(chat_id, "‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ!")
    show_recommendations_management_menu(chat_id)


def handle_edit_direction_strengths(message, state):
    chat_id = message.chat.id
    direction_id = state['direction_id']

    new_strengths = message.text
    update_direction_strengths(direction_id, new_strengths)

    # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    if chat_id in admin_states:
        del admin_states[chat_id]

    bot.send_message(chat_id, "‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!")
    show_recommendations_management_menu(chat_id)


def handle_add_interview_question(message, state):
    chat_id = message.chat.id
    direction_id = state['direction_id']

    question_text = message.text
    add_interview_question(direction_id, question_text)

    # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    if chat_id in admin_states:
        del admin_states[chat_id]

    bot.send_message(chat_id, "‚úÖ –í–æ–ø—Ä–æ—Å –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!")
    show_recommendations_management_menu(chat_id)


def handle_edit_interview_question(message, state):
    chat_id = message.chat.id
    question_id = state['question_id']

    new_text = message.text
    update_interview_question(question_id, new_text)

    # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    if chat_id in admin_states:
        del admin_states[chat_id]

    bot.send_message(chat_id, "‚úÖ –í–æ–ø—Ä–æ—Å –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!")
    show_recommendations_management_menu(chat_id)


def get_user(user_id):
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM users WHERE user_id = ?", (user_id,))
    user = cursor.fetchone()
    conn.close()

    if user:
        return {
            'user_id': user[0],
            'username': user[1],
            'first_name': user[2],
            'current_question': user[3],
            'answers': json.loads(user[4]),
            'direction': user[5],
            'created_at': user[6]
        }
    return None


def create_or_update_user(user_id, username, first_name, current_question=0, answers=None, direction=None):
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()

    if answers is None:
        answers = []

    cursor.execute('''
        INSERT OR REPLACE INTO users (user_id, username, first_name, current_question, answers, direction)
        VALUES (?, ?, ?, ?, ?, ?)
    ''', (user_id, username, first_name, current_question, json.dumps(answers), direction))

    conn.commit()
    conn.close()

    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ/–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    return get_user(user_id)


def get_test_questions():
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM test_questions ORDER BY question_order")
    questions = cursor.fetchall()
    conn.close()

    result = []
    for question in questions:
        result.append({
            'id': question[0],
            'text': question[1],
            'options': json.loads(question[2]),
            'weights': json.loads(question[3]),
            'order': question[4],
            'image_id': question[5]
        })

    # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    for q in result:
        if q['image_id']:
            print(f"–í–æ–ø—Ä–æ—Å {q['id']} –∏–º–µ–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: {q['image_id']}")

    return result


def get_direction_by_name(name):
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM directions WHERE name = ?", (name,))
    direction = cursor.fetchone()
    conn.close()

    if direction:
        return {
            'id': direction[0],
            'name': direction[1],
            'description': direction[2],
            'strengths': direction[3],
            'daily_task_template': direction[4],
            'free_course_url': direction[5],
            'paid_course_url': direction[6]
        }
    return None


def get_direction_by_id(direction_id):
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM directions WHERE id = ?", (direction_id,))
    direction = cursor.fetchone()
    conn.close()

    if direction:
        return {
            'id': direction[0],
            'name': direction[1],
            'description': direction[2],
            'strengths': direction[3],
            'daily_task_template': direction[4],
            'free_course_url': direction[5],
            'paid_course_url': direction[6]
        }
    return None


def get_interview_questions(direction_id):
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute("SELECT question_text FROM interview_questions WHERE direction_id = ?", (direction_id,))
    questions = cursor.fetchall()
    conn.close()

    return [q[0] for q in questions]


def get_random_daily_task(direction_id, difficulty_level=1):
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute(
        "SELECT task_text FROM daily_tasks WHERE direction_id = ? AND difficulty_level = ? ORDER BY RANDOM() LIMIT 1",
        (direction_id, difficulty_level)
    )
    task = cursor.fetchone()
    conn.close()

    return task[0] if task else None


def get_admin_stats():
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()

    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    cursor.execute("SELECT COUNT(*) FROM users")
    users_count = cursor.fetchone()[0]

    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
    cursor.execute("SELECT COUNT(*) FROM users WHERE direction IS NOT NULL")
    completed_tests = cursor.fetchone()[0]

    # –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    cursor.execute("SELECT direction, COUNT(*) FROM users WHERE direction IS NOT NULL GROUP BY direction")
    directions_stats = cursor.fetchall()

    conn.close()

    return {
        'users_count': users_count,
        'completed_tests': completed_tests,
        'directions_stats': directions_stats
    }


# –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ —Ç–µ—Å—Ç–∞
def get_all_questions():
    """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã —Ç–µ—Å—Ç–∞"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM test_questions ORDER BY question_order")
    questions = cursor.fetchall()
    conn.close()

    result = []
    for question in questions:
        result.append({
            'id': question[0],
            'text': question[1],
            'options': json.loads(question[2]),
            'weights': json.loads(question[3]),
            'order': question[4],
            'image_id': question[5]
        })
    return result


def get_question_by_id(question_id):
    """–ü–æ–ª—É—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å –ø–æ ID"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM test_questions WHERE id = ?", (question_id,))
    question = cursor.fetchone()
    conn.close()

    if question:
        return {
            'id': question[0],
            'text': question[1],
            'options': json.loads(question[2]),
            'weights': json.loads(question[3]),
            'order': question[4],
            'image_id': question[5]
        }
    return None


def add_question(question_text, options, weights, order, image_id=None):
    """–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute(
        "INSERT INTO test_questions (question_text, options, weights, question_order, image_id) VALUES (?, ?, ?, ?, ?)",
        (question_text, json.dumps(options), json.dumps(weights), order, image_id)
    )
    conn.commit()
    conn.close()


def update_question(question_id, question_text, options, weights, order, image_id=None):
    """–û–±–Ω–æ–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute(
        "UPDATE test_questions SET question_text = ?, options = ?, weights = ?, question_order = ?, image_id = ? WHERE id = ?",
        (question_text, json.dumps(options), json.dumps(weights), order, image_id, question_id)
    )
    conn.commit()
    conn.close()


def delete_question(question_id):
    """–£–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    cursor.execute("DELETE FROM test_questions WHERE id = ?", (question_id,))
    conn.commit()
    conn.close()


def update_question_image(question_id, image_id):
    """–û–±–Ω–æ–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö"""
    try:
        conn = sqlite3.connect('bot_database.db')
        cursor = conn.cursor()
        cursor.execute(
            "UPDATE test_questions SET image_id = ? WHERE id = ?",
            (image_id, question_id)
        )
        conn.commit()
        print(f"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –ë–î –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ {question_id}: {image_id}")  # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

        # –ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å
        cursor.execute("SELECT image_id FROM test_questions WHERE id = ?", (question_id,))
        result = cursor.fetchone()
        print(f"–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: {result}")  # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ë–î: {e}")
    finally:
        conn.close()


# –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫
def show_settings_menu(chat_id):
    """–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞"""
    markup = types.InlineKeyboardMarkup()
    btn_edit_welcome = types.InlineKeyboardButton('‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ', callback_data='admin_edit_welcome')
    btn_edit_result = types.InlineKeyboardButton('üéØ –ò–∑–º–µ–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤', callback_data='admin_edit_result')
    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_main')

    markup.add(btn_edit_welcome)
    markup.add(btn_edit_result)
    markup.add(btn_back)

    bot.send_message(chat_id, "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞:", reply_markup=markup)


# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
init_db()
check_and_fix_db_structure()


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±–æ—Ç–∞
@bot.message_handler(commands=['start', 'test'])
def start_message(message):
    user_id = message.from_user.id
    username = message.from_user.username
    first_name = message.from_user.first_name

    # –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    create_or_update_user(user_id, username, first_name, 0, [])

    markup = types.InlineKeyboardMarkup()
    button_text = get_bot_text('button_start_test')
    button = types.InlineKeyboardButton(button_text, callback_data='start_test')
    markup.add(button)

    welcome_text = get_bot_text('welcome').format(first_name=first_name)

    bot.send_message(
        message.chat.id,
        welcome_text,
        reply_markup=markup
    )


@bot.message_handler(commands=['help'])
def help_message(message):
    help_text = '''–í–æ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:

/start ‚Äî –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
/test ‚Äî –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –µ—â—ë —Ä–∞–∑
/result ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Ç–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
/questions ‚Äî –≤–æ–ø—Ä–æ—Å—ã —Å —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è
/tasks ‚Äî –ø–æ–ª—É—á–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ
/course ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å
/freecourse ‚Äî –ø–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —É—Ä–æ–∫
/menu ‚Äî –º–µ–Ω—é –±–æ—Ç–∞
/help ‚Äî –ø–æ–º–æ—â—å
/admin ‚Äî –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞'''

    bot.send_message(message.chat.id, help_text)


@bot.message_handler(commands=['menu'])
def menu_message(message):
    user_id = message.from_user.id
    user = get_user(user_id)

    # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –±–∞–∑–µ, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
    if user is None:
        user = create_or_update_user(
            user_id,
            message.from_user.username,
            message.from_user.first_name,
            0,
            []
        )

    markup = types.InlineKeyboardMarkup()
    button_text = get_bot_text('button_start_test')
    test_btn = types.InlineKeyboardButton(button_text, callback_data='start_test')

    # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –ø—Ä–æ—à–µ–ª —Ç–µ—Å—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
    if user and user['direction']:
        question_btn = types.InlineKeyboardButton('–í–æ–ø—Ä–æ—Å—ã —Å —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è', callback_data='menu_questions')
        task_btn = types.InlineKeyboardButton('–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è', callback_data='menu_tasks')
        course_btn = types.InlineKeyboardButton('–û–±—É—á–∞—é—â–∏–µ –∫—É—Ä—Å—ã', callback_data='menu_course')
        markup.row(test_btn, question_btn)
        markup.row(task_btn, course_btn)
    else:
        markup.add(test_btn)

    bot.send_message(
        message.chat.id,
        'üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é!\n\n–ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –≤—ã–±–∏—Ä–∞–π—Ç–µ –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª.',
        reply_markup=markup
    )


@bot.message_handler(commands=['debug'])
def debug_message(message):
    """–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π"""
    chat_id = message.chat.id
    state = admin_states.get(chat_id, {})

    debug_text = f"–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: {state}\n"

    # –ü—Ä–æ–≤–µ—Ä–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()

    # –ü—Ä–æ–≤–µ—Ä–∏–º —Å—Ç–æ–ª–±—Ü—ã test_questions
    cursor.execute("PRAGMA table_info(test_questions)")
    columns = cursor.fetchall()
    debug_text += f"–°—Ç–æ–ª–±—Ü—ã test_questions: {[col[1] for col in columns]}\n"

    # –ü—Ä–æ–≤–µ—Ä–∏–º –µ—Å—Ç—å –ª–∏ –≤–æ–ø—Ä–æ—Å—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
    cursor.execute("SELECT id, question_text, image_id FROM test_questions WHERE image_id IS NOT NULL")
    questions_with_images = cursor.fetchall()
    debug_text += f"–í–æ–ø—Ä–æ—Å—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏: {questions_with_images}\n"

    conn.close()

    bot.send_message(chat_id, f"<code>{debug_text}</code>", parse_mode='HTML')


def handle_question_image(message, state):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫ –≤–æ–ø—Ä–æ—Å—É"""
    chat_id = message.chat.id
    question_id = state['question_id']

    print(f"–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ {question_id}")  # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    print(f"–¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è: {message.content_type}")  # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

    if message.photo:
        # –ü–æ–ª—É—á–∞–µ–º file_id —Å–∞–º–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        file_id = message.photo[-1].file_id
        print(f"–ü–æ–ª—É—á–µ–Ω file_id: {file_id}")  # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
        update_question_image(question_id, file_id)

        # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        if chat_id in admin_states:
            del admin_states[chat_id]

        bot.send_message(chat_id, "‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫ –≤–æ–ø—Ä–æ—Å—É!")
        show_test_management_menu(chat_id)
    elif message.document:
        bot.send_message(chat_id, "‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∫ —Ñ–æ—Ç–æ (–Ω–µ –∫–∞–∫ —Ñ–∞–π–ª).")
    else:
        bot.send_message(chat_id, "‚ùå –≠—Ç–æ –Ω–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∫ —Ñ–æ—Ç–æ.")

@bot.callback_query_handler(func=lambda callback: True)
def callback_handler(callback):
    user_id = callback.from_user.id
    user = get_user(user_id)

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö callback
    if callback.data.startswith('admin_'):
        handle_admin_callback(callback)
        return

    # –û—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    if callback.data == 'start_test':
        # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –±–∞–∑–µ, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
        if user is None:
            user = create_or_update_user(
                user_id,
                callback.from_user.username,
                callback.from_user.first_name,
                0,
                []
            )
        start_test(callback.message.chat.id, user, callback.message.message_id)
    elif callback.data.startswith('answer_'):
        answer_index = int(callback.data.split('_')[1])
        process_answer(callback.message.chat.id, user_id, answer_index, callback.message.message_id)
    elif callback.data == 'get_questions':
        if user and user['direction']:
            direction = get_direction_by_name(user['direction'])
            show_interview_questions(callback.message.chat.id, direction, user_id)
            # –ü–æ—Å–ª–µ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å—Ä–∞–∑—É –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—é –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π (—Ü–µ–ø–æ—á–∫–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞)
            offer_daily_tasks_after_test(callback.message.chat.id, user, user_id)
    elif callback.data == 'daily_tasks_yes_after_test':
        if user and user['direction']:
            direction = get_direction_by_name(user['direction'])
            send_daily_task(callback.message.chat.id, direction, user_id)
            # –ü–æ—Å–ª–µ –∑–∞–¥–∞–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –ø–ª–∞—Ç–Ω—ã–π (—Ü–µ–ø–æ—á–∫–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞)
            show_free_course_after_test(callback.message.chat.id, direction, user_id)
    elif callback.data == 'daily_tasks_no_after_test':
        if user and user['direction']:
            direction = get_direction_by_name(user['direction'])
            # –ü—Ä–∏ –æ—Ç–∫–∞–∑–µ –æ—Ç –∑–∞–¥–∞–Ω–∏–π —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å (—Ü–µ–ø–æ—á–∫–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞)
            show_free_course_after_test(callback.message.chat.id, direction, user_id)
    elif callback.data == 'paid_course_yes_after_test':
        if user and user['direction']:
            direction = get_direction_by_name(user['direction'])
            show_paid_course(callback.message.chat.id, direction)
    elif callback.data == 'paid_course_no_after_test':
        bot.send_message(callback.message.chat.id, '–•–æ—Ä–æ—à–æ! –ï—Å–ª–∏ –ø–µ—Ä–µ–¥—É–º–∞–µ—à—å - –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è —á–µ—Ä–µ–∑ –º–µ–Ω—é üòä')
    elif callback.data == 'menu_questions':
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –±–∞–∑—ã
        if user and user['direction']:
            direction = get_direction_by_name(user['direction'])
            # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å—ã, –±–µ–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π
            show_interview_questions_only(callback.message.chat.id, direction)
        else:
            bot.send_message(callback.message.chat.id, '–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç! –ù–∞–∂–º–∏ /start')
    elif callback.data == 'menu_tasks':
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –±–∞–∑—ã
        if user and user['direction']:
            # –ü—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—é –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π (–∏–∑ –º–µ–Ω—é)
            offer_daily_tasks_from_menu(callback.message.chat.id, user, user_id)
        else:
            bot.send_message(callback.message.chat.id, '–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç! –ù–∞–∂–º–∏ /start')
    elif callback.data == 'daily_tasks_yes_menu':
        if user and user['direction']:
            direction = get_direction_by_name(user['direction'])
            send_daily_task(callback.message.chat.id, direction, user_id)
            # –ü–æ—Å–ª–µ –∑–∞–¥–∞–Ω–∏—è –Ω–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ü–µ–ø–æ—á–∫—É (—Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ–Ω—é)
    elif callback.data == 'daily_tasks_no_menu':
        bot.send_message(callback.message.chat.id, '–•–æ—Ä–æ—à–æ! –ï—Å–ª–∏ –ø–µ—Ä–µ–¥—É–º–∞–µ—à—å - –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è —á–µ—Ä–µ–∑ –º–µ–Ω—é üòä')
    elif callback.data == 'menu_course':
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –±–∞–∑—ã
        if user and user['direction']:
            direction = get_direction_by_name(user['direction'])
            # –°—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å, –∑–∞—Ç–µ–º –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –ø–ª–∞—Ç–Ω—ã–π (–∏–∑ –º–µ–Ω—é)
            show_free_course_from_menu(callback.message.chat.id, direction, user_id)
        else:
            bot.send_message(callback.message.chat.id, '–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç! –ù–∞–∂–º–∏ /start')
    elif callback.data == 'paid_course_yes_menu':
        if user and user['direction']:
            direction = get_direction_by_name(user['direction'])
            show_paid_course(callback.message.chat.id, direction)
    elif callback.data == 'paid_course_no_menu':
        bot.send_message(callback.message.chat.id, '–•–æ—Ä–æ—à–æ! –ï—Å–ª–∏ –ø–µ—Ä–µ–¥—É–º–∞–µ—à—å - –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è —á–µ—Ä–µ–∑ –º–µ–Ω—é üòä')


@bot.message_handler(commands=['admin'])
def admin_message(message):
    # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    msg = bot.send_message(message.chat.id, '–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:')
    bot.register_next_step_handler(msg, process_admin_password)


def process_admin_password(message):
    if message.text == ADMIN_PASSWORD:
        # –ü–∞—Ä–æ–ª—å –≤–µ—Ä–Ω—ã–π, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
        show_admin_panel(message.chat.id)
    else:
        bot.send_message(message.chat.id, '–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ —Å –∫–æ–º–∞–Ω–¥—ã /admin')


def show_admin_panel(chat_id):
    stats = get_admin_stats()

    stats_text = f'''üîß –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞:
üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {stats['users_count']}
‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤: {stats['completed_tests']}

–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:'''

    for direction, count in stats['directions_stats']:
        stats_text += f'\n‚Ä¢ {direction}: {count}'

    markup = types.InlineKeyboardMarkup()
    btn1 = types.InlineKeyboardButton('–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–º', callback_data='admin_test')
    btn2 = types.InlineKeyboardButton('–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏', callback_data='admin_recommendations')
    btn3 = types.InlineKeyboardButton('–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è', callback_data='admin_tasks')
    btn4 = types.InlineKeyboardButton('–û–±—É—á–∞—é—â–∏–µ –∫—É—Ä—Å—ã', callback_data='admin_courses')
    btn5 = types.InlineKeyboardButton('–ù–∞—Å—Ç—Ä–æ–π–∫–∏', callback_data='admin_settings')
    btn6 = types.InlineKeyboardButton('–í—ã–π—Ç–∏ –∏–∑ —Ä–µ–∂–∏–º–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞', callback_data='admin_exit')

    markup.add(btn1, btn2, btn3, btn4, btn5, btn6)

    bot.send_message(chat_id, stats_text, reply_markup=markup)


@bot.message_handler(commands=['result'])
def result_message(message):
    user = get_user(message.from_user.id)
    if user and user['direction']:
        show_test_result(message.chat.id, user)
    else:
        bot.send_message(message.chat.id, '–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç! –ù–∞–∂–º–∏ /start')


@bot.message_handler(commands=['questions'])
def questions_message(message):
    user = get_user(message.from_user.id)
    if user and user['direction']:
        direction = get_direction_by_name(user['direction'])
        if direction:
            show_interview_questions(message.chat.id, direction, message.from_user.id)
        else:
            bot.send_message(message.chat.id, '–û—à–∏–±–∫–∞: –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ.')
    else:
        bot.send_message(message.chat.id, '–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç! –ù–∞–∂–º–∏ /start')


@bot.message_handler(commands=['tasks'])
def tasks_message(message):
    user = get_user(message.from_user.id)
    if user and user['direction']:
        offer_daily_tasks(message.chat.id, user, message.from_user.id)
    else:
        bot.send_message(message.chat.id, '–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç! –ù–∞–∂–º–∏ /start')


@bot.message_handler(commands=['freecourse'])
def freecourse_message(message):
    user = get_user(message.from_user.id)
    if user and user['direction']:
        direction = get_direction_by_name(user['direction'])
        if direction:
            show_free_course(message.chat.id, direction, message.from_user.id)
        else:
            bot.send_message(message.chat.id, '–û—à–∏–±–∫–∞: –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ.')
    else:
        bot.send_message(message.chat.id, '–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç! –ù–∞–∂–º–∏ /start')


@bot.message_handler(commands=['course'])
def course_message(message):
    user = get_user(message.from_user.id)
    if user and user['direction']:
        direction = get_direction_by_name(user['direction'])
        if direction:
            offer_paid_course(message.chat.id, direction, message.from_user.id)
        else:
            bot.send_message(message.chat.id, '–û—à–∏–±–∫–∞: –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ.')
    else:
        bot.send_message(message.chat.id, '–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç! –ù–∞–∂–º–∏ /start')


def offer_daily_tasks_direct(chat_id, user, user_id):
    """–ü—Ä—è–º–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π (–∏–∑ –º–µ–Ω—é)"""
    markup = types.InlineKeyboardMarkup()
    yes_btn = types.InlineKeyboardButton('–î–∞', callback_data='daily_tasks_yes')
    no_btn = types.InlineKeyboardButton('–ù–µ—Ç', callback_data='daily_tasks_no')
    markup.row(yes_btn, no_btn)

    bot.send_message(
        chat_id,
        '–ß—Ç–æ–±—ã —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä–µ–µ, –º–æ–≥—É –ø—Ä–∏—Å—ã–ª–∞—Ç—å —Ç–µ–±–µ –º–∞–ª–µ–Ω—å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.\n\n–•–æ—á–µ—à—å –ø–æ–ª—É—á–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ —Ç–≤–æ–µ–º—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é? üòä',
        reply_markup=markup
    )


def show_free_course_direct(chat_id, direction, user_id):
    """–ü—Ä—è–º–æ–π –ø–æ–∫–∞–∑ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –∫—É—Ä—Å–∞ —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –ø–ª–∞—Ç–Ω–æ–≥–æ"""
    course_text = f'''üéì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –≤–≤–æ–¥–Ω—ã–π –∫—É—Ä—Å –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é "{direction['name']}":

{direction['free_course_url']}

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –æ—Å–Ω–æ–≤–∞—Ö –∏ –ø–æ–Ω—è—Ç—å, –Ω—Ä–∞–≤–∏—Ç—Å—è –ª–∏ —Ç–µ–±–µ —ç—Ç–∞ —Å—Ñ–µ—Ä–∞.'''

    bot.send_message(chat_id, course_text)

    # –°—Ä–∞–∑—É –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å –ø–æ—Å–ª–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ
    markup = types.InlineKeyboardMarkup()
    yes_btn = types.InlineKeyboardButton('–î–∞', callback_data='paid_course_yes')
    no_btn = types.InlineKeyboardButton('–ù–µ—Ç', callback_data='paid_course_no')
    markup.row(yes_btn, no_btn)

    bot.send_message(
        chat_id,
        '–•–æ—á–µ—à—å –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å, –∫–æ—Ç–æ—Ä—ã–π –æ–±—É—á–∏—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ —Å –Ω—É–ª—è?',
        reply_markup=markup
    )


def start_test(chat_id, user, message_id=None):
    # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å —Ç–µ—Å—Ç–∞
    create_or_update_user(
        user['user_id'],
        user['username'],
        user['first_name'],
        0,
        []
    )
    send_question(chat_id, user['user_id'], 0, message_id)


def send_question(chat_id, user_id, question_index, message_id=None):
    questions = get_test_questions()
    if question_index >= len(questions):
        return

    question = questions[question_index]
    markup = types.InlineKeyboardMarkup()

    for i, option in enumerate(question['options']):
        button = types.InlineKeyboardButton(option, callback_data=f'answer_{i}')
        markup.add(button)

    # –ï—Å–ª–∏ –µ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –ø—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–≥–æ
    if question.get('image_id'):
        print(f"–û—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º: {question['image_id']}")  # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        try:
            # –í—Å–µ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
            msg = bot.send_photo(
                chat_id=chat_id,
                photo=question['image_id'],
                caption=question['text'],
                reply_markup=markup
            )
            return msg.message_id
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: {e}")
            # –ü—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç
            msg = bot.send_message(chat_id, question['text'], reply_markup=markup)
            return msg.message_id
    else:
        # –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å
        if message_id:
            try:
                bot.edit_message_text(
                    chat_id=chat_id,
                    message_id=message_id,
                    text=question['text'],
                    reply_markup=markup
                )
                return message_id
            except:
                pass

        msg = bot.send_message(chat_id, question['text'], reply_markup=markup)
        return msg.message_id


def process_answer(chat_id, user_id, answer_index, message_id):
    user = get_user(user_id)
    if not user:
        return

    questions = get_test_questions()
    current_question_index = user['current_question']

    # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    answers = user['answers']
    answers.append(answer_index)

    # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    print(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id} –≤—ã–±—Ä–∞–ª –≤–∞—Ä–∏–∞–Ω—Ç {answer_index} –Ω–∞ –≤–æ–ø—Ä–æ—Å–µ {current_question_index}")

    # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É –∏–ª–∏ –∑–∞–≤–µ—Ä—à–∞–µ–º —Ç–µ—Å—Ç
    if current_question_index + 1 < len(questions):
        create_or_update_user(
            user_id,
            user['username'],
            user['first_name'],
            current_question_index + 1,
            answers
        )
        new_message_id = send_question(chat_id, user_id, current_question_index + 1, message_id)
    else:
        # –ó–∞–≤–µ—Ä—à–∞–µ–º —Ç–µ—Å—Ç –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        direction = calculate_result(answers, questions)
        create_or_update_user(
            user_id,
            user['username'],
            user['first_name'],
            current_question_index + 1,
            answers,
            direction
        )
        user = get_user(user_id)
        show_test_result(chat_id, user)

def calculate_result(answers, questions):
    direction_scores = {
        '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä': 0,
        '–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫': 0,
        '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫': 0,
        '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏': 0,
        'Front-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 0,
        'Back-End —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫': 0,
        'UI | UX –¥–∏–∑–∞–π–Ω–µ—Ä': 0,
        '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥': 0
    }

    # –ü–æ–¥—Å—á–µ—Ç –±–∞–ª–ª–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–æ–≤
    for i, answer_index in enumerate(answers):
        if i < len(questions):
            question = questions[i]
            weights = question['weights']

            # –ü–æ–ª—É—á–∞–µ–º –≤–µ—Å–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞
            if isinstance(weights, list) and answer_index < len(weights):
                # –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: weights - —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π –ø–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º
                option_weights = weights[answer_index]
                for direction, score in option_weights.items():
                    if direction in direction_scores:
                        direction_scores[direction] += score
            elif isinstance(weights, dict):
                # –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: weights - –æ–¥–∏–Ω —Å–ª–æ–≤–∞—Ä—å –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞
                for direction, score in weights.items():
                    if direction in direction_scores:
                        direction_scores[direction] += score

    print(f"–ò—Ç–æ–≥–æ–≤—ã–µ –±–∞–ª–ª—ã: {direction_scores}")  # –î–ª—è –æ—Ç–ª–∞–¥–∫–∏

    # –ù–∞—Ö–æ–¥–∏–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –±–∞–ª–ª–æ–≤
    best_direction = max(direction_scores, key=direction_scores.get)
    return best_direction


def show_test_result(chat_id, user):
    direction = get_direction_by_name(user['direction'])

    if not direction:
        # –ï—Å–ª–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–≤–æ–µ –¥–æ—Å—Ç—É–ø–Ω–æ–µ
        direction = get_direction_by_name('–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä')

    result_text = get_bot_text('result').format(
        direction_name=direction['name'],
        direction_description=direction['description'],
        direction_strengths=direction['strengths']
    )

    markup = types.InlineKeyboardMarkup()
    button = types.InlineKeyboardButton('–ü–æ–ª—É—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã', callback_data='get_questions')
    markup.add(button)

    bot.send_message(chat_id, result_text, reply_markup=markup)


def show_interview_questions(chat_id, direction, user_id):
    """–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞)"""
    questions = get_interview_questions(direction['id'])

    questions_text = f'üìã –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è –Ω–∞ –ø–æ–∑–∏—Ü–∏—é {direction["name"]}:\n\n'
    for i, q in enumerate(questions, 1):
        questions_text += f'{i}. {q}\n'

    bot.send_message(chat_id, questions_text)


def show_interview_questions_only(chat_id, direction):
    """–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è, –±–µ–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π (–∏–∑ –º–µ–Ω—é)"""
    questions = get_interview_questions(direction['id'])

    questions_text = f'üìã –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è –Ω–∞ –ø–æ–∑–∏—Ü–∏—é {direction["name"]}:\n\n'
    for i, q in enumerate(questions, 1):
        questions_text += f'{i}. {q}\n'

    bot.send_message(chat_id, questions_text)


def offer_daily_tasks_after_test(chat_id, user, user_id):
    """–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ (–≤–µ–¥–µ—Ç –∫ –∫—É—Ä—Å–∞–º)"""
    markup = types.InlineKeyboardMarkup()
    yes_btn = types.InlineKeyboardButton('–î–∞', callback_data='daily_tasks_yes_after_test')
    no_btn = types.InlineKeyboardButton('–ù–µ—Ç', callback_data='daily_tasks_no_after_test')
    markup.row(yes_btn, no_btn)

    daily_tasks_text = get_bot_text('daily_tasks_offer')

    bot.send_message(
        chat_id,
        daily_tasks_text,
        reply_markup=markup
    )


def offer_daily_tasks_from_menu(chat_id, user, user_id):
    """–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π –∏–∑ –º–µ–Ω—é (–Ω–µ –≤–µ–¥–µ—Ç –∫ –∫—É—Ä—Å–∞–º)"""
    markup = types.InlineKeyboardMarkup()
    yes_btn = types.InlineKeyboardButton('–î–∞', callback_data='daily_tasks_yes_menu')
    no_btn = types.InlineKeyboardButton('–ù–µ—Ç', callback_data='daily_tasks_no_menu')
    markup.row(yes_btn, no_btn)

    daily_tasks_text = get_bot_text('daily_tasks_offer')

    bot.send_message(
        chat_id,
        daily_tasks_text,
        reply_markup=markup
    )


def show_free_course_after_test(chat_id, direction, user_id):
    """–ü–æ–∫–∞–∑ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –∫—É—Ä—Å–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ (–≤–µ–¥–µ—Ç –∫ –ø–ª–∞—Ç–Ω–æ–º—É –∫—É—Ä—Å—É)"""
    course_text = f'''üéì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –≤–≤–æ–¥–Ω—ã–π –∫—É—Ä—Å –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é "{direction['name']}":

{direction['free_course_url']}

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –æ—Å–Ω–æ–≤–∞—Ö –∏ –ø–æ–Ω—è—Ç—å, –Ω—Ä–∞–≤–∏—Ç—Å—è –ª–∏ —Ç–µ–±–µ —ç—Ç–∞ —Å—Ñ–µ—Ä–∞.'''

    bot.send_message(chat_id, course_text)

    # –°—Ä–∞–∑—É –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å –ø–æ—Å–ª–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ (—Ü–µ–ø–æ—á–∫–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞)
    markup = types.InlineKeyboardMarkup()
    yes_btn = types.InlineKeyboardButton('–î–∞', callback_data='paid_course_yes_after_test')
    no_btn = types.InlineKeyboardButton('–ù–µ—Ç', callback_data='paid_course_no_after_test')
    markup.row(yes_btn, no_btn)

    paid_course_text = get_bot_text('paid_course_offer')

    bot.send_message(
        chat_id,
        paid_course_text,
        reply_markup=markup
    )


def show_free_course_from_menu(chat_id, direction, user_id):
    """–ü–æ–∫–∞–∑ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –∫—É—Ä—Å–∞ –∏–∑ –º–µ–Ω—é (–≤–µ–¥–µ—Ç –∫ –ø–ª–∞—Ç–Ω–æ–º—É –∫—É—Ä—Å—É)"""
    course_text = f'''üéì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –≤–≤–æ–¥–Ω—ã–π –∫—É—Ä—Å –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é "{direction['name']}":

{direction['free_course_url']}

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –æ—Å–Ω–æ–≤–∞—Ö –∏ –ø–æ–Ω—è—Ç—å, –Ω—Ä–∞–≤–∏—Ç—Å—è –ª–∏ —Ç–µ–±–µ —ç—Ç–∞ —Å—Ñ–µ—Ä–∞.'''

    bot.send_message(chat_id, course_text)

    # –°—Ä–∞–∑—É –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å –ø–æ—Å–ª–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ (–∏–∑ –º–µ–Ω—é)
    markup = types.InlineKeyboardMarkup()
    yes_btn = types.InlineKeyboardButton('–î–∞', callback_data='paid_course_yes_menu')
    no_btn = types.InlineKeyboardButton('–ù–µ—Ç', callback_data='paid_course_no_menu')
    markup.row(yes_btn, no_btn)

    paid_course_text = get_bot_text('paid_course_offer')

    bot.send_message(
        chat_id,
        paid_course_text,
        reply_markup=markup
    )


def send_daily_task(chat_id, direction, user_id):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è"""
    task_text = get_random_daily_task(direction['id'])
    full_task = direction['daily_task_template'].format(task=task_text)

    task_message = f'''üéØ –ó–∞–¥–∞–Ω–∏–µ –¥–Ω—è:

{full_task}

–í–æ–∑–≤—Ä–∞—â–∞–π—Å—è –∑–∞–≤—Ç—Ä–∞ –∑–∞ –Ω–æ–≤—ã–º –∑–∞–¥–∞–Ω–∏–µ–º! üí™'''

    bot.send_message(chat_id, task_message)


def show_paid_course(chat_id, direction):
    """–ü–æ–∫–∞–∑ –ø–ª–∞—Ç–Ω–æ–≥–æ –∫—É—Ä—Å–∞"""
    course_text = f'''üíº –ü–æ–ª–Ω—ã–π –∫—É—Ä—Å –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é "{direction['name']}":

{direction['paid_course_url']}

–≠—Ç–æ—Ç –∫—É—Ä—Å –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ —Å—Ç–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–º –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏! üöÄ'''

    bot.send_message(chat_id, course_text)


def offer_daily_tasks(chat_id, user, user_id):
    markup = types.InlineKeyboardMarkup()
    yes_btn = types.InlineKeyboardButton('–î–∞', callback_data='daily_tasks_yes')
    no_btn = types.InlineKeyboardButton('–ù–µ—Ç', callback_data='daily_tasks_no')
    markup.row(yes_btn, no_btn)

    daily_tasks_text = get_bot_text('daily_tasks_offer')

    bot.send_message(
        chat_id,
        daily_tasks_text,
        reply_markup=markup
    )


def show_free_course(chat_id, direction, user_id):
    course_text = f'''üéì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –≤–≤–æ–¥–Ω—ã–π –∫—É—Ä—Å –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é "{direction['name']}":

{direction['free_course_url']}

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –æ—Å–Ω–æ–≤–∞—Ö –∏ –ø–æ–Ω—è—Ç—å, –Ω—Ä–∞–≤–∏—Ç—Å—è –ª–∏ —Ç–µ–±–µ —ç—Ç–∞ —Å—Ñ–µ—Ä–∞.'''

    bot.send_message(chat_id, course_text)
    offer_paid_course(chat_id, direction, user_id)


def offer_paid_course(chat_id, direction, user_id):
    markup = types.InlineKeyboardMarkup()
    yes_btn = types.InlineKeyboardButton('–î–∞', callback_data='paid_course_yes')
    no_btn = types.InlineKeyboardButton('–ù–µ—Ç', callback_data='paid_course_no')
    markup.row(yes_btn, no_btn)

    paid_course_text = get_bot_text('paid_course_offer')

    bot.send_message(
        chat_id,
        paid_course_text,
        reply_markup=markup
    )


def show_test_management_menu(chat_id):
    """–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–º"""
    markup = types.InlineKeyboardMarkup()
    btn_add = types.InlineKeyboardButton('‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å', callback_data='admin_add_question')
    btn_edit = types.InlineKeyboardButton('‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å', callback_data='admin_edit_question')
    btn_delete = types.InlineKeyboardButton('üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å', callback_data='admin_delete_question')
    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_main')

    markup.add(btn_add)
    markup.add(btn_edit)
    markup.add(btn_delete)
    markup.add(btn_back)

    bot.send_message(chat_id, "üìù –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–º:", reply_markup=markup)


def show_question_list_for_editing(chat_id):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"""
    questions = get_all_questions()

    if not questions:
        bot.send_message(chat_id, "‚ùå –í —Ç–µ—Å—Ç–µ –ø–æ–∫–∞ –Ω–µ—Ç –≤–æ–ø—Ä–æ—Å–æ–≤.")
        return

    markup = types.InlineKeyboardMarkup()
    for question in questions:
        btn_edit = types.InlineKeyboardButton(
            f"‚úèÔ∏è #{question['order'] + 1}: {question['text'][:30]}...",
            callback_data=f'admin_edit_question_{question["id"]}'
        )
        btn_image = types.InlineKeyboardButton(
            f"üñºÔ∏è –î–æ–±–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ",
            callback_data=f'admin_add_image_{question["id"]}'
        )
        markup.add(btn_edit, btn_image)

    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_back_to_test_menu')
    markup.add(btn_back)

    bot.send_message(chat_id, "üìã –í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:", reply_markup=markup)


def show_question_list_for_deletion(chat_id):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è"""
    questions = get_all_questions()

    if not questions:
        bot.send_message(chat_id, "‚ùå –í —Ç–µ—Å—Ç–µ –ø–æ–∫–∞ –Ω–µ—Ç –≤–æ–ø—Ä–æ—Å–æ–≤.")
        return

    markup = types.InlineKeyboardMarkup()
    for question in questions:
        btn = types.InlineKeyboardButton(
            f"#{question['order'] + 1}: {question['text'][:30]}...",
            callback_data=f'admin_delete_question_{question["id"]}'
        )
        markup.add(btn)

    btn_back = types.InlineKeyboardButton('‚¨ÖÔ∏è –ù–∞–∑–∞–¥', callback_data='admin_back_to_test_menu')
    markup.add(btn_back)

    bot.send_message(chat_id, "üóëÔ∏è –í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è:", reply_markup=markup)


@bot.message_handler(content_types=['photo'])
def handle_photos(message):
    chat_id = message.chat.id
    state = admin_states.get(chat_id, {})

    print(f"–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ç–æ: —Å–æ—Å—Ç–æ—è–Ω–∏–µ = {state}")  # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

    # –ï—Å–ª–∏ —ç—Ç–æ —Ñ–æ—Ç–æ –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ —Ç–µ—Å—Ç–∞
    if state.get('action') == 'add_question_image':
        if message.photo:
            # –ü–æ–ª—É—á–∞–µ–º file_id —Å–∞–º–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            file_id = message.photo[-1].file_id
            print(f"–ü–æ–ª—É—á–µ–Ω file_id –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Ñ–æ—Ç–æ: {file_id}")  # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
            question_id = state['question_id']
            update_question_image(question_id, file_id)

            # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            if chat_id in admin_states:
                del admin_states[chat_id]

            bot.send_message(chat_id, "‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫ –≤–æ–ø—Ä–æ—Å—É!")
            show_test_management_menu(chat_id)
        return

    # –ï—Å–ª–∏ —Ñ–æ—Ç–æ –Ω–µ —Å–≤—è–∑–∞–Ω–æ —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
    bot.send_message(chat_id, "‚ùå –≠—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ.")

# –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
@bot.message_handler(func=lambda message: message.chat.id in admin_states, content_types=['text', 'photo', 'document'])
def handle_admin_states(message):
    chat_id = message.chat.id
    state = admin_states.get(chat_id, {})

    print(f"–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞: {state}")  # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    print(f"–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞: {message.content_type}")  # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

    # –í –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤
    if state.get('action') == 'add_question_image':
        if message.photo:
            # –ü–æ–ª—É—á–∞–µ–º file_id —Å–∞–º–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            file_id = message.photo[-1].file_id
            print(f"–ü–æ–ª—É—á–µ–Ω file_id: {file_id}")  # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
            question_id = state['question_id']
            update_question_image(question_id, file_id)

            # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            if chat_id in admin_states:
                del admin_states[chat_id]

            bot.send_message(chat_id, "‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫ –≤–æ–ø—Ä–æ—Å—É!")
            show_test_management_menu(chat_id)
        else:
            bot.send_message(chat_id, "‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∫ —Ñ–æ—Ç–æ (–Ω–µ –∫–∞–∫ —Ñ–∞–π–ª).")
        return

    # –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π —Ç—Ä–µ–±—É–µ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    if message.content_type != 'text':
        bot.send_message(chat_id, "‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.")
        return

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π...
    if state.get('action') in ['add_question', 'edit_question']:
        handle_question_management(message, state)
    elif state.get('action') == 'edit_direction_description':
        handle_edit_direction_description(message, state)
    elif state.get('action') == 'edit_direction_strengths':
        handle_edit_direction_strengths(message, state)
    elif state.get('action') == 'add_interview_question':
        handle_add_interview_question(message, state)
    elif state.get('action') == 'edit_interview_question':
        handle_edit_interview_question(message, state)
    elif state.get('action') == 'add_daily_task':
        handle_add_daily_task(message, state)
    elif state.get('action') == 'edit_daily_task':
        handle_edit_daily_task(message, state)
    elif state.get('action') == 'edit_free_course':
        handle_edit_free_course(message, state)
    elif state.get('action') == 'edit_paid_course':
        handle_edit_paid_course(message, state)
    elif state.get('action') == 'edit_welcome':
        new_text = message.text
        update_bot_text('welcome', new_text)
        if chat_id in admin_states:
            del admin_states[chat_id]
        bot.send_message(chat_id, "‚úÖ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ!")
        show_settings_menu(chat_id)
    elif state.get('action') == 'edit_result':
        new_text = message.text
        update_bot_text('result', new_text)
        if chat_id in admin_states:
            del admin_states[chat_id]
        bot.send_message(chat_id, "‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–æ!")
        show_settings_menu(chat_id)


def handle_question_management(message, state):
    chat_id = message.chat.id
    action = state['action']
    step = state['step']

    if step == 'text':
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
        admin_states[chat_id]['question_text'] = message.text
        admin_states[chat_id]['step'] = 'options'
        bot.send_message(chat_id,
                         "üìù –í–≤–µ–¥–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É —Å –∑–∞–ø—è—Ç–æ–π (;):\n\n–ü—Ä–∏–º–µ—Ä: –í–∞—Ä–∏–∞–Ω—Ç 1;–í–∞—Ä–∏–∞–Ω—Ç 2;–í–∞—Ä–∏–∞–Ω—Ç 3")

    elif step == 'options':
        try:
            options = [opt.strip() for opt in message.text.split(';') if opt.strip()]
            if len(options) < 2:
                bot.send_message(chat_id, "‚ùå –î–æ–ª–∂–Ω–æ –±—ã—Ç—åËá≥Â∞ë 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞:")
                return

            admin_states[chat_id]['options'] = options
            admin_states[chat_id]['step'] = 'weights'

            # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏
            directions = get_all_directions()
            directions_text = "\n".join([f"‚Ä¢ {d['name']}" for d in directions])
            bot.send_message(
                chat_id,
                f"üìä –ù–∞–∑–Ω–∞—á—å—Ç–µ –≤–µ—Å–∞ –¥–ª—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π. –§–æ—Ä–º–∞—Ç:\n\n<–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ>:<–≤–µ—Å>\n\n–ù–∞–ø—Ä–∏–º–µ—Ä:\n–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:2\n–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫:1\n\n–î–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:\n{directions_text}\n\n–í–≤–µ–¥–∏—Ç–µ –≤–µ—Å–∞ (–∫–∞–∂–¥–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏):"
            )

        except Exception as e:
            bot.send_message(chat_id, f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤: {str(e)}")


    elif step == 'weights':

        try:

            # –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –≤–µ—Å–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞

            admin_states[chat_id]['weights'] = []

            options_count = len(admin_states[chat_id]['options'])

            # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –≤–µ—Å–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞

            for i in range(options_count):
                admin_states[chat_id]['current_option'] = i

                bot.send_message(

                    chat_id,

                    f"üìä –í–≤–µ–¥–∏—Ç–µ –≤–µ—Å–∞ –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ {i + 1} ({admin_states[chat_id]['options'][i]}). –§–æ—Ä–º–∞—Ç:\n\n<–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ>:<–≤–µ—Å>\n\n–ù–∞–ø—Ä–∏–º–µ—Ä:\n–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:2\n–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫:1"

                )

                return  # –ü—Ä–µ—Ä—ã–≤–∞–µ–º –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è


        except Exception as e:

            bot.send_message(chat_id, f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–µ—Å–æ–≤: {str(e)}")


# –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞
@bot.callback_query_handler(func=lambda callback: callback.data == 'admin_confirm_question')
def handle_confirm_question(callback):
    chat_id = callback.message.chat.id
    state = admin_states.get(chat_id, {})

    if not state:
        bot.send_message(chat_id, "‚ùå –°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞. –ù–∞—á–Ω–∏—Ç–µ –∑–∞–Ω–æ–≤–æ.")
        return

    try:
        question_text = state['question_text']
        options = state['options']
        weights = state['weights']
        order = state['order']
        action = state['action']

        if action == 'add_question':
            add_question(question_text, options, weights, order)
            message_text = "‚úÖ –í–æ–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!"
        elif action == 'edit_question':
            question_id = state.get('question_id')
            if question_id:
                update_question(question_id, question_text, options, weights, order)
                message_text = "‚úÖ –í–æ–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!"
            else:
                message_text = "‚ùå –û—à–∏–±–∫–∞: ID –≤–æ–ø—Ä–æ—Å–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω"

        # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        if chat_id in admin_states:
            del admin_states[chat_id]

        bot.send_message(chat_id, message_text)
        show_test_management_menu(chat_id)

    except Exception as e:
        bot.send_message(chat_id, f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–∞: {str(e)}")


def handle_admin_callback(callback):
    chat_id = callback.message.chat.id
    action = callback.data

    if action == 'admin_main':
        show_admin_panel(chat_id)
    elif action == 'admin_test':
        show_test_management_menu(chat_id)
    elif action == 'admin_recommendations':
        show_recommendations_management_menu(chat_id)
    elif action == 'admin_tasks':
        show_tasks_management_menu(chat_id)
    elif action == 'admin_add_task':
        show_directions_for_task(chat_id, 'add')
    elif action == 'admin_edit_task':
        show_directions_for_task(chat_id, 'edit')
    elif action == 'admin_delete_task':
        show_directions_for_task(chat_id, 'delete')
    elif action == 'admin_back_to_tasks_menu':
        show_tasks_management_menu(chat_id)
    elif action.startswith('admin_add_task_'):
        direction_id = int(action.split('_')[3])
        admin_states[chat_id] = {'action': 'add_daily_task', 'direction_id': direction_id}
        bot.send_message(chat_id, "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è:")
    elif action.startswith('admin_edit_task_'):
        direction_id = int(action.split('_')[3])
        show_tasks_for_editing(chat_id, direction_id)
    elif action.startswith('admin_delete_task_'):
        direction_id = int(action.split('_')[3])
        show_tasks_for_deletion(chat_id, direction_id)
    elif action.startswith('admin_edit_task_item_'):
        task_id = int(action.split('_')[4])
        admin_states[chat_id] = {'action': 'edit_daily_task', 'task_id': task_id}
        bot.send_message(chat_id, "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è:")
    elif action.startswith('admin_delete_task_item_'):
        task_id = int(action.split('_')[4])
        delete_daily_task(task_id)
        bot.send_message(chat_id, "‚ùå –ó–∞–¥–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ!")
        show_tasks_management_menu(chat_id)
    elif action.startswith('admin_difficulty_'):
        difficulty = int(action.split('_')[2])
        state = admin_states.get(chat_id, {})
        if state.get('action') == 'add_daily_task':
            direction_id = state['direction_id']
            task_text = state['task_text']
            add_daily_task(direction_id, task_text, difficulty)

            # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            if chat_id in admin_states:
                del admin_states[chat_id]

            bot.send_message(chat_id, "‚úÖ –ó–∞–¥–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ!")
            show_tasks_management_menu(chat_id)
    elif action.startswith('admin_edit_difficulty_'):
        difficulty = int(action.split('_')[2])
        state = admin_states.get(chat_id, {})
        if state.get('action') == 'edit_daily_task':
            task_id = state['task_id']
            new_text = state['new_text']
            update_daily_task(task_id, new_text, difficulty)

            # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            if chat_id in admin_states:
                del admin_states[chat_id]

            bot.send_message(chat_id, "‚úÖ –ó–∞–¥–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ!")
            show_tasks_management_menu(chat_id)
    elif action == 'admin_edit_direction_text':
        show_directions_for_editing(chat_id, 'description')
    elif action == 'admin_edit_direction_strengths':
        show_directions_for_editing(chat_id, 'strengths')
    elif action == 'admin_add_interview_question':
        show_directions_for_interview_question(chat_id, 'add')
    elif action == 'admin_edit_interview_question':
        show_interview_questions_for_editing(chat_id)
    elif action == 'admin_delete_interview_question':
        show_interview_questions_for_deletion(chat_id)
    elif action == 'admin_back_to_recommendations_menu':
        show_recommendations_management_menu(chat_id)
    elif action.startswith('admin_edit_desc_'):
        direction_id = int(action.split('_')[3])
        admin_states[chat_id] = {'action': 'edit_direction_description', 'direction_id': direction_id}
        bot.send_message(chat_id, "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:")
    elif action.startswith('admin_edit_strengths_'):
        direction_id = int(action.split('_')[3])
        admin_states[chat_id] = {'action': 'edit_direction_strengths', 'direction_id': direction_id}
        bot.send_message(chat_id, "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–µ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:")
    elif action.startswith('admin_add_interview_'):
        direction_id = int(action.split('_')[3])
        admin_states[chat_id] = {'action': 'add_interview_question', 'direction_id': direction_id}
        bot.send_message(chat_id, "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è:")
    elif action.startswith('admin_edit_interview_'):
        question_id = int(action.split('_')[3])
        admin_states[chat_id] = {'action': 'edit_interview_question', 'question_id': question_id}
        bot.send_message(chat_id, "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞:")
    elif action.startswith('admin_delete_interview_'):
        question_id = int(action.split('_')[3])
        delete_interview_question(question_id)
        bot.send_message(chat_id, "‚ùå –í–æ–ø—Ä–æ—Å –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω!")
        show_recommendations_management_menu(chat_id)
    elif action == 'admin_add_question':
        admin_states[chat_id] = {'action': 'add_question', 'step': 'text'}
        bot.send_message(chat_id, "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞:")
    elif action == 'admin_edit_question':
        show_question_list_for_editing(chat_id)
    elif action == 'admin_delete_question':
        show_question_list_for_deletion(chat_id)
    elif action == 'admin_back_to_test_menu':
        show_test_management_menu(chat_id)
    elif action.startswith('admin_edit_question_'):
        question_id = int(action.split('_')[3])
        admin_states[chat_id] = {'action': 'edit_question', 'step': 'text', 'question_id': question_id}
        bot.send_message(chat_id, "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞:")
    elif action.startswith('admin_delete_question_'):
        question_id = int(action.split('_')[3])
        delete_question(question_id)
        bot.send_message(chat_id, "‚ùå –í–æ–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω!")
        show_test_management_menu(chat_id)
    elif action == 'admin_courses':
        show_courses_management_menu(chat_id)
    elif action == 'admin_settings':
        show_settings_menu(chat_id)
    elif action == 'admin_exit':
        if chat_id in admin_states:
            del admin_states[chat_id]
        bot.send_message(chat_id, 'üëã –í—ã –≤—ã—à–ª–∏ –∏–∑ —Ä–µ–∂–∏–º–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.')
        menu_message(callback.message)
    elif action == 'admin_courses':
        show_courses_management_menu(chat_id)
    elif action == 'admin_edit_free_course':
        show_directions_for_course_editing(chat_id, 'free')
    elif action == 'admin_edit_paid_course':
        show_directions_for_course_editing(chat_id, 'paid')
    elif action == 'admin_back_to_courses_menu':
        show_courses_management_menu(chat_id)
    elif action.startswith('admin_edit_free_'):
        direction_id = int(action.split('_')[3])
        admin_states[chat_id] = {'action': 'edit_free_course', 'direction_id': direction_id}
        bot.send_message(chat_id, "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å:")
    elif action.startswith('admin_edit_paid_'):
        direction_id = int(action.split('_')[3])
        admin_states[chat_id] = {'action': 'edit_paid_course', 'direction_id': direction_id}
        bot.send_message(chat_id, "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å:")
    # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
    elif action == 'admin_edit_welcome':
        admin_states[chat_id] = {'action': 'edit_welcome'}
        current_text = get_bot_text('welcome')
        bot.send_message(chat_id,
                         f"‚úèÔ∏è –¢–µ–∫—É—â–∏–π —Ç–µ–∫—Å—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è:\n\n{current_text}\n\n–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å {{first_name}} –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–º–µ–Ω–∏):")
    elif action == 'admin_edit_result':
        admin_states[chat_id] = {'action': 'edit_result'}
        current_text = get_bot_text('result')
        bot.send_message(chat_id,
                         f"üéØ –¢–µ–∫—É—â–∏–π —Ç–µ–∫—Å—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:\n\n{current_text}\n\n–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å {{direction_name}}, {{direction_description}}, {{direction_strengths}} –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏):")
    elif action == 'admin_back_to_settings':
        show_settings_menu(chat_id)
    elif action.startswith('admin_add_image_'):
        question_id = int(action.split('_')[3])
        admin_states[chat_id] = {'action': 'add_question_image', 'question_id': question_id}
        print(f"–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫ –≤–æ–ø—Ä–æ—Å—É {question_id}")  # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        bot.send_message(chat_id, "üì∑ –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∫ —Ñ–æ—Ç–æ (–Ω–µ –∫–∞–∫ —Ñ–∞–π–ª) –¥–ª—è —ç—Ç–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞:")


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏
@bot.message_handler(func=lambda message: True)
def handle_unknown(message):
    if message.text.startswith('/'):
        bot.send_message(
            message.chat.id,
            '–ü—Ä–æ—Å—Ç–∏, —è –ø–æ–∫–∞ –Ω–µ –ø–æ–Ω–∏–º–∞—é —ç—Ç—É –∫–æ–º–∞–Ω–¥—É üòÖ\n–í—ã–±–µ—Ä–∏ –ø—É–Ω–∫—Ç –∏–∑ –º–µ–Ω—é (/menu) –∏–ª–∏ –Ω–∞–∂–º–∏ /help'
        )
    else:
        bot.send_message(
            message.chat.id,
            '–ü—Ä–æ—Å—Ç–∏, —è –ø–æ–∫–∞ –Ω–µ –ø–æ–Ω–∏–º–∞—é —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å üòÖ\n–í—ã–±–µ—Ä–∏ –ø—É–Ω–∫—Ç –∏–∑ –º–µ–Ω—é (/menu) –∏–ª–∏ –Ω–∞–∂–º–∏ /help'
        )


if __name__ == "__main__":
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...")
    bot.polling(none_stop=True)